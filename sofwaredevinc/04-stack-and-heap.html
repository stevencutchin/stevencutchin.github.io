<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stack &amp; Heap — C Memory Concepts</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Playfair+Display:wght@700;900&family=Source+Serif+4:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #06090f;
    --surface: #0d1320;
    --surface2: #141d2f;
    --border: #1e2d4a;
    --text: #c8d6e5;
    --text-dim: #6b7fa3;
    --heading: #e8f0fe;
    --accent-cyan: #00e5ff;
    --accent-green: #69f0ae;
    --accent-orange: #ffab40;
    --accent-purple: #b388ff;
    --accent-red: #ff5252;
    --accent-yellow: #ffd740;
    --accent-blue: #448aff;
    --code-bg: #0a0f1a;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: var(--bg); color: var(--text); font-family: 'Source Serif 4', Georgia, serif; font-size: 18px; line-height: 1.75; }
  .page-grain { position: fixed; inset: 0; pointer-events: none; z-index: 100; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E"); background-repeat: repeat; }
  .series-bar { background: var(--surface); border-bottom: 1px solid var(--border); padding: 12px 40px; display: flex; align-items: center; gap: 16px; font-family: 'IBM Plex Mono', monospace; font-size: 13px; color: var(--text-dim); position: sticky; top: 0; z-index: 50; backdrop-filter: blur(12px); }
  .series-bar .chip { background: var(--accent-purple); color: var(--bg); padding: 2px 10px; border-radius: 3px; font-weight: 600; font-size: 11px; letter-spacing: 0.5px; text-transform: uppercase; }
  .series-bar .nav-links { margin-left: auto; display: flex; gap: 20px; }
  .series-bar .nav-links a { color: var(--text-dim); text-decoration: none; transition: color 0.2s; }
  .series-bar .nav-links a:hover { color: var(--accent-cyan); }
  .series-bar .nav-links a.active { color: var(--accent-purple); }
  .hero { padding: 80px 40px 60px; max-width: 900px; margin: 0 auto; }
  .hero .number { font-family: 'IBM Plex Mono', monospace; font-size: 14px; color: var(--accent-purple); letter-spacing: 3px; text-transform: uppercase; margin-bottom: 16px; }
  h1 { font-family: 'Playfair Display', serif; font-weight: 900; font-size: clamp(40px, 6vw, 64px); color: var(--heading); line-height: 1.1; margin-bottom: 20px; }
  h1 .hl-blue { background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  h1 .hl-purple { background: linear-gradient(135deg, var(--accent-purple), #ea80fc); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .subtitle { font-size: 20px; color: var(--text-dim); max-width: 650px; line-height: 1.6; }
  .content { max-width: 900px; margin: 0 auto; padding: 0 40px 100px; }
  h2 { font-family: 'Playfair Display', serif; font-weight: 700; font-size: 32px; color: var(--heading); margin: 60px 0 24px; padding-top: 20px; }
  h3 { font-family: 'IBM Plex Mono', monospace; font-size: 16px; color: var(--accent-purple); letter-spacing: 1px; text-transform: uppercase; margin: 40px 0 16px; }
  p { margin-bottom: 20px; }
  .diagram-container { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 32px; margin: 32px 0; overflow-x: auto; }
  .diagram-container .caption { font-family: 'IBM Plex Mono', monospace; font-size: 12px; color: var(--text-dim); margin-top: 16px; text-align: center; letter-spacing: 0.5px; text-transform: uppercase; }
  svg text { font-family: 'IBM Plex Mono', monospace; }
  code { font-family: 'IBM Plex Mono', monospace; background: var(--code-bg); border: 1px solid var(--border); padding: 2px 8px; border-radius: 4px; font-size: 15px; color: var(--accent-green); }
  pre { background: var(--code-bg); border: 1px solid var(--border); border-radius: 8px; padding: 24px 28px; margin: 24px 0; overflow-x: auto; font-family: 'IBM Plex Mono', monospace; font-size: 15px; line-height: 1.7; color: var(--text); }
  pre .kw { color: var(--accent-purple); }
  pre .type { color: var(--accent-cyan); }
  pre .str { color: var(--accent-green); }
  pre .comment { color: var(--text-dim); font-style: italic; }
  pre .num { color: var(--accent-orange); }
  pre .func { color: var(--accent-orange); }
  .key-concept { background: linear-gradient(135deg, rgba(179,136,255,0.06), rgba(68,138,255,0.04)); border-left: 3px solid var(--accent-purple); padding: 20px 24px; margin: 28px 0; border-radius: 0 8px 8px 0; }
  .key-concept strong { color: var(--accent-purple); font-family: 'IBM Plex Mono', monospace; font-size: 13px; letter-spacing: 1px; text-transform: uppercase; }
  .comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 32px 0; }
  .comparison .col { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 24px; }
  .comparison .col h4 { font-family: 'IBM Plex Mono', monospace; font-size: 16px; margin-bottom: 16px; font-weight: 600; }
  .comparison .col ul { list-style: none; padding: 0; }
  .comparison .col li { font-size: 15px; padding: 6px 0; padding-left: 20px; position: relative; color: var(--text-dim); }
  .comparison .col li::before { content: "→"; position: absolute; left: 0; }
  @media (max-width: 700px) { .comparison { grid-template-columns: 1fr; } .hero, .content { padding-left: 20px; padding-right: 20px; } .series-bar { padding: 10px 16px; font-size: 11px; } .diagram-container { padding: 16px; } }
</style>
</head>
<body>
<div class="page-grain"></div>

<nav class="series-bar">
  <span class="chip">4 / 5</span>
  <span>C Memory Concepts</span>
  <div class="nav-links">
    <a href="00-overview.html">Overview</a>
    <a href="01-pointers.html">Pointers</a>
    <a href="02-arrays-are-pointers.html">Arrays</a>
    <a href="03-malloc-free.html">malloc &amp; free</a>
    <a href="04-stack-and-heap.html" class="active">Stack &amp; Heap</a>
    <a href="05-garbage-collection.html">Garbage Collection</a>
    <a href="06-pointer-training-cases.html">Training Cases</a>
    <a href="07-pointer-types-and-casting.html">Types &amp; Casting</a>
  </div>
</nav>

<header class="hero">
  <div class="number">Chapter 04</div>
  <h1>The <span class="hl-blue">Stack</span> &amp; the <span class="hl-purple">Heap</span></h1>
  <p class="subtitle">A C program's memory is divided into distinct regions, each with different rules. Understanding the stack and heap is understanding how C programs actually live in memory.</p>
</header>

<main class="content">

  <h2>The Memory Layout of a C Program</h2>

  <p>When the operating system loads your compiled C program, it sets up a virtual address space divided into several segments. The most important ones — from low addresses at the bottom to high addresses at the top — are shown below.</p>

  <div class="diagram-container">
    <svg viewBox="0 0 720 520" width="100%" height="520">
      <!-- Full memory layout -->

      <!-- Background bar -->
      <rect x="200" y="20" width="320" height="480" rx="8" fill="var(--surface2)" stroke="var(--border)" stroke-width="1"/>

      <!-- Text segment -->
      <rect x="200" y="420" width="320" height="80" rx="0" fill="rgba(107,127,163,0.08)" stroke="#6b7fa3" stroke-width="1"/>
      <text x="360" y="455" text-anchor="middle" fill="#6b7fa3" font-size="14" font-weight="600">Text (Code)</text>
      <text x="360" y="475" text-anchor="middle" fill="#6b7fa3" font-size="11">Your compiled machine instructions</text>
      <text x="360" y="490" text-anchor="middle" fill="#6b7fa3" font-size="10">Read-only</text>

      <!-- Data/BSS segment -->
      <rect x="200" y="360" width="320" height="60" rx="0" fill="rgba(255,171,64,0.06)" stroke="#ffab40" stroke-width="1"/>
      <text x="360" y="388" text-anchor="middle" fill="#ffab40" font-size="14" font-weight="600">Data / BSS</text>
      <text x="360" y="405" text-anchor="middle" fill="#6b7fa3" font-size="11">Global &amp; static variables</text>

      <!-- Heap -->
      <rect x="200" y="240" width="320" height="120" rx="0" fill="rgba(179,136,255,0.08)" stroke="#b388ff" stroke-width="2"/>
      <text x="360" y="275" text-anchor="middle" fill="#b388ff" font-size="18" font-weight="600">Heap</text>
      <text x="360" y="298" text-anchor="middle" fill="#6b7fa3" font-size="12">malloc / calloc / realloc</text>
      <text x="360" y="315" text-anchor="middle" fill="#6b7fa3" font-size="11">Grows ↓ toward higher addresses</text>

      <!-- Arrow showing heap growth -->
      <path d="M 540 260 L 540 340" stroke="#b388ff" stroke-width="2" fill="none" marker-end="url(#gd)"/>
      <text x="565" y="300" fill="#b388ff" font-size="10">grows ↓</text>

      <!-- Free space -->
      <rect x="200" y="160" width="320" height="80" rx="0" fill="none" stroke="var(--border)" stroke-width="0.5" stroke-dasharray="4,4"/>
      <text x="360" y="205" text-anchor="middle" fill="#6b7fa3" font-size="12" font-style="italic">↕ Unused / Available</text>

      <!-- Stack -->
      <rect x="200" y="20" width="320" height="140" rx="8 8 0 0" fill="rgba(68,138,255,0.08)" stroke="#448aff" stroke-width="2"/>
      <text x="360" y="60" text-anchor="middle" fill="#448aff" font-size="18" font-weight="600">Stack</text>
      <text x="360" y="83" text-anchor="middle" fill="#6b7fa3" font-size="12">Local variables, function calls</text>
      <text x="360" y="100" text-anchor="middle" fill="#6b7fa3" font-size="11">Grows ↑ toward lower addresses</text>

      <!-- Arrow showing stack growth -->
      <defs>
        <marker id="gd" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
          <path d="M 0 0 L 10 5 L 0 10 z" fill="#b388ff"/>
        </marker>
        <marker id="gu" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
          <path d="M 0 0 L 10 5 L 0 10 z" fill="#448aff"/>
        </marker>
      </defs>
      <path d="M 540 140 L 540 40" stroke="#448aff" stroke-width="2" fill="none" marker-end="url(#gu)"/>
      <text x="565" y="95" fill="#448aff" font-size="10">grows ↑</text>

      <!-- Address labels -->
      <text x="180" y="35" text-anchor="end" fill="#ffab40" font-size="10">High addr</text>
      <text x="180" y="495" text-anchor="end" fill="#ffab40" font-size="10">Low addr</text>
      <text x="180" y="30" text-anchor="end" fill="#ffab40" font-size="10">0xFFFF...</text>
      <text x="180" y="490" text-anchor="end" fill="#ffab40" font-size="10">0x0000...</text>
    </svg>
    <div class="caption">Virtual memory layout of a typical C program. Stack grows down from the top, heap grows up from the bottom.</div>
  </div>

  <h2>The Stack</h2>

  <p>The stack is where local variables and function call information live. Every time you call a function, a new <strong>"stack frame"</strong> is pushed on top containing that function's local variables, parameters, and the return address. When the function returns, its frame is popped off and the memory is instantly reclaimed.</p>

  <pre><span class="type">int</span> <span class="func">add</span>(<span class="type">int</span> a, <span class="type">int</span> b) {
    <span class="type">int</span> result = a + b;   <span class="comment">// result is on add's stack frame</span>
    <span class="kw">return</span> result;
}   <span class="comment">// ← frame destroyed here — result no longer exists</span>

<span class="type">int</span> <span class="func">main</span>() {
    <span class="type">int</span> x = <span class="num">10</span>;           <span class="comment">// x is on main's stack frame</span>
    <span class="type">int</span> y = <span class="num">20</span>;           <span class="comment">// y is on main's stack frame</span>
    <span class="type">int</span> z = <span class="func">add</span>(x, y);    <span class="comment">// calls add → pushes new frame</span>
    <span class="kw">return</span> <span class="num">0</span>;
}</pre>

  <div class="diagram-container">
    <svg viewBox="0 0 720 350" width="100%" height="350">
      <!-- Step 1: main only -->
      <text x="120" y="25" text-anchor="middle" fill="#448aff" font-size="13" font-weight="600">Before add()</text>

      <rect x="40" y="40" width="160" height="140" rx="6" fill="rgba(68,138,255,0.06)" stroke="#448aff" stroke-width="2"/>
      <text x="120" y="65" text-anchor="middle" fill="#448aff" font-size="12" font-weight="600">main()</text>
      <rect x="55" y="78" width="130" height="28" rx="4" fill="rgba(68,138,255,0.1)" stroke="#448aff" stroke-width="0.5"/>
      <text x="120" y="97" text-anchor="middle" fill="#c8d6e5" font-size="11">x = 10</text>
      <rect x="55" y="112" width="130" height="28" rx="4" fill="rgba(68,138,255,0.1)" stroke="#448aff" stroke-width="0.5"/>
      <text x="120" y="131" text-anchor="middle" fill="#c8d6e5" font-size="11">y = 20</text>
      <rect x="55" y="146" width="130" height="28" rx="4" fill="rgba(68,138,255,0.1)" stroke="#448aff" stroke-width="0.5"/>
      <text x="120" y="165" text-anchor="middle" fill="#6b7fa3" font-size="11">z = ???</text>

      <text x="120" y="200" text-anchor="middle" fill="#6b7fa3" font-size="10">↑ stack top</text>

      <!-- Step 2: add pushed -->
      <text x="380" y="25" text-anchor="middle" fill="#69f0ae" font-size="13" font-weight="600">During add()</text>

      <rect x="300" y="40" width="160" height="140" rx="6" fill="rgba(68,138,255,0.06)" stroke="#448aff" stroke-width="1.5"/>
      <text x="380" y="65" text-anchor="middle" fill="#448aff" font-size="12" font-weight="600">main()</text>
      <rect x="315" y="78" width="130" height="24" rx="4" fill="rgba(68,138,255,0.08)" stroke="#448aff" stroke-width="0.5"/>
      <text x="380" y="95" text-anchor="middle" fill="#c8d6e5" font-size="10">x = 10</text>
      <rect x="315" y="106" width="130" height="24" rx="4" fill="rgba(68,138,255,0.08)" stroke="#448aff" stroke-width="0.5"/>
      <text x="380" y="123" text-anchor="middle" fill="#c8d6e5" font-size="10">y = 20</text>
      <rect x="315" y="134" width="130" height="24" rx="4" fill="rgba(68,138,255,0.08)" stroke="#448aff" stroke-width="0.5"/>
      <text x="380" y="151" text-anchor="middle" fill="#6b7fa3" font-size="10">z = ???</text>

      <!-- add() frame ON TOP -->
      <rect x="300" y="190" width="160" height="120" rx="6" fill="rgba(105,240,174,0.08)" stroke="#69f0ae" stroke-width="2"/>
      <text x="380" y="215" text-anchor="middle" fill="#69f0ae" font-size="12" font-weight="600">add()</text>
      <rect x="315" y="228" width="130" height="24" rx="4" fill="rgba(105,240,174,0.1)" stroke="#69f0ae" stroke-width="0.5"/>
      <text x="380" y="245" text-anchor="middle" fill="#c8d6e5" font-size="10">a = 10</text>
      <rect x="315" y="256" width="130" height="24" rx="4" fill="rgba(105,240,174,0.1)" stroke="#69f0ae" stroke-width="0.5"/>
      <text x="380" y="273" text-anchor="middle" fill="#c8d6e5" font-size="10">b = 20</text>
      <rect x="315" y="284" width="130" height="24" rx="4" fill="rgba(105,240,174,0.1)" stroke="#69f0ae" stroke-width="0.5"/>
      <text x="380" y="301" text-anchor="middle" fill="#69f0ae" font-size="10">result = 30</text>

      <text x="380" y="330" text-anchor="middle" fill="#6b7fa3" font-size="10">↑ stack top</text>

      <!-- Step 3: add returned -->
      <text x="620" y="25" text-anchor="middle" fill="#b388ff" font-size="13" font-weight="600">After add()</text>

      <rect x="540" y="40" width="160" height="140" rx="6" fill="rgba(68,138,255,0.06)" stroke="#448aff" stroke-width="2"/>
      <text x="620" y="65" text-anchor="middle" fill="#448aff" font-size="12" font-weight="600">main()</text>
      <rect x="555" y="78" width="130" height="28" rx="4" fill="rgba(68,138,255,0.1)" stroke="#448aff" stroke-width="0.5"/>
      <text x="620" y="97" text-anchor="middle" fill="#c8d6e5" font-size="11">x = 10</text>
      <rect x="555" y="112" width="130" height="28" rx="4" fill="rgba(68,138,255,0.1)" stroke="#448aff" stroke-width="0.5"/>
      <text x="620" y="131" text-anchor="middle" fill="#c8d6e5" font-size="11">y = 20</text>
      <rect x="555" y="146" width="130" height="28" rx="4" fill="rgba(68,138,255,0.1)" stroke="#448aff" stroke-width="0.5"/>
      <text x="620" y="165" text-anchor="middle" fill="#69f0ae" font-size="11" font-weight="600">z = 30</text>

      <!-- Ghost of add's frame -->
      <rect x="540" y="190" width="160" height="120" rx="6" fill="none" stroke="#ff5252" stroke-width="1" stroke-dasharray="5,5" opacity="0.4"/>
      <text x="620" y="255" text-anchor="middle" fill="#ff5252" font-size="11" opacity="0.6">GONE</text>

      <text x="620" y="200" text-anchor="middle" fill="#6b7fa3" font-size="10">↑ stack top</text>
    </svg>
    <div class="caption">Stack frames are created when functions are called and destroyed when they return. The stack grows downward in memory.</div>
  </div>

  <h2>The Heap</h2>

  <p>The heap is a large, unstructured pool of memory managed by <code>malloc</code> and <code>free</code>. Unlike the stack, heap memory doesn't follow a last-in-first-out order — you can allocate and free blocks in any order. Memory on the heap persists until you explicitly free it (or the program terminates).</p>

  <pre><span class="type">int</span>* <span class="func">create_array</span>(<span class="type">int</span> size) {
    <span class="type">int</span> *arr = <span class="func">malloc</span>(size * <span class="kw">sizeof</span>(<span class="type">int</span>));  <span class="comment">// allocated on the heap</span>
    <span class="kw">return</span> arr;  <span class="comment">// safe! heap memory survives function return</span>
}

<span class="type">int</span> <span class="func">main</span>() {
    <span class="type">int</span> *data = <span class="func">create_array</span>(<span class="num">100</span>);
    <span class="comment">// data points to heap memory — still valid after create_array returned</span>
    data[<span class="num">0</span>] = <span class="num">42</span>;   <span class="comment">// works perfectly</span>
    <span class="func">free</span>(data);     <span class="comment">// YOU must free it — nobody else will</span>
}</pre>

  <h2>Stack vs. Heap: Side by Side</h2>

  <div class="comparison">
    <div class="col">
      <h4 style="color: var(--accent-blue);">Stack</h4>
      <ul>
        <li>Automatic — allocated/freed by function calls</li>
        <li>Very fast (just move a pointer)</li>
        <li>Limited size (~1-8 MB typically)</li>
        <li>LIFO order — can't free out of order</li>
        <li>Local variables, parameters, return addresses</li>
        <li>Dies when the function returns</li>
      </ul>
    </div>
    <div class="col">
      <h4 style="color: var(--accent-purple);">Heap</h4>
      <ul>
        <li>Manual — you call malloc and free</li>
        <li>Slower (allocator must search free list)</li>
        <li>Large (limited by available RAM/swap)</li>
        <li>Any order — allocate/free whenever</li>
        <li>Dynamic data, data structures, large buffers</li>
        <li>Persists until you explicitly free it</li>
      </ul>
    </div>
  </div>

  <h2>A Common Mistake: Returning Stack Addresses</h2>

  <p>One of the most dangerous errors in C is returning a pointer to a local variable. The local variable lives on the stack and is destroyed when the function returns — the pointer now points to invalid memory.</p>

  <pre><span class="type">int</span>* <span class="func">bad_function</span>() {
    <span class="type">int</span> x = <span class="num">42</span>;
    <span class="kw">return</span> &amp;x;   <span class="comment">// ✗ DANGER! x is destroyed when this function returns</span>
}                <span class="comment">//   The returned pointer is a dangling pointer!</span>

<span class="type">int</span>* <span class="func">good_function</span>() {
    <span class="type">int</span> *p = <span class="func">malloc</span>(<span class="kw">sizeof</span>(<span class="type">int</span>));
    *p = <span class="num">42</span>;
    <span class="kw">return</span> p;    <span class="comment">// ✓ Safe — heap memory survives the function return</span>
}                <span class="comment">//   (caller must eventually free(p))</span></pre>

  <div class="diagram-container">
    <svg viewBox="0 0 720 200" width="100%" height="200">
      <!-- Bad version -->
      <rect x="30" y="20" width="310" height="160" rx="8" fill="rgba(255,82,82,0.04)" stroke="#ff5252" stroke-width="1.5"/>
      <text x="185" y="45" text-anchor="middle" fill="#ff5252" font-size="14" font-weight="600">✗ Returning stack address</text>

      <rect x="50" y="60" width="120" height="40" rx="4" fill="rgba(68,138,255,0.08)" stroke="#448aff" stroke-width="1"/>
      <text x="110" y="85" text-anchor="middle" fill="#448aff" font-size="12">x = 42</text>
      <text x="110" y="115" text-anchor="middle" fill="#6b7fa3" font-size="10">on stack ← destroyed</text>

      <rect x="200" y="60" width="120" height="40" rx="4" fill="rgba(255,82,82,0.08)" stroke="#ff5252" stroke-width="1"/>
      <text x="260" y="78" text-anchor="middle" fill="#ff5252" font-size="11">returned ptr</text>
      <text x="260" y="93" text-anchor="middle" fill="#ff5252" font-size="10">→ garbage</text>
      <text x="260" y="115" text-anchor="middle" fill="#ff5252" font-size="10">DANGLING!</text>

      <!-- Good version -->
      <rect x="380" y="20" width="310" height="160" rx="8" fill="rgba(105,240,174,0.04)" stroke="#69f0ae" stroke-width="1.5"/>
      <text x="535" y="45" text-anchor="middle" fill="#69f0ae" font-size="14" font-weight="600">✓ Returning heap address</text>

      <rect x="400" y="60" width="120" height="40" rx="4" fill="rgba(179,136,255,0.08)" stroke="#b388ff" stroke-width="1"/>
      <text x="460" y="85" text-anchor="middle" fill="#b388ff" font-size="12">*p = 42</text>
      <text x="460" y="115" text-anchor="middle" fill="#6b7fa3" font-size="10">on heap ← survives!</text>

      <rect x="550" y="60" width="120" height="40" rx="4" fill="rgba(105,240,174,0.08)" stroke="#69f0ae" stroke-width="1"/>
      <text x="610" y="78" text-anchor="middle" fill="#69f0ae" font-size="11">returned ptr</text>
      <text x="610" y="93" text-anchor="middle" fill="#69f0ae" font-size="10">→ valid data</text>
      <text x="610" y="115" text-anchor="middle" fill="#69f0ae" font-size="10">caller must free()</text>
    </svg>
    <div class="caption">Never return a pointer to a local variable. Use malloc if you need memory that outlives the function.</div>
  </div>

  <h2>Stack Overflow</h2>

  <p>The stack has a fixed maximum size (typically 1-8 MB). If you use too much of it — usually through deep or infinite recursion, or by declaring very large local arrays — the stack will overflow, crashing your program with a "stack overflow" or "segmentation fault."</p>

  <pre><span class="comment">// This will crash with a stack overflow:</span>
<span class="kw">void</span> <span class="func">infinite_recursion</span>() {
    <span class="type">int</span> big_array[<span class="num">10000</span>];   <span class="comment">// 40KB on each call!</span>
    <span class="func">infinite_recursion</span>();   <span class="comment">// never stops → stack exhausted</span>
}

<span class="comment">// For large data, use the heap instead:</span>
<span class="type">int</span> *big_data = <span class="func">malloc</span>(<span class="num">1000000</span> * <span class="kw">sizeof</span>(<span class="type">int</span>));  <span class="comment">// 4MB — fine on heap</span></pre>

  <div class="key-concept">
    <strong>Takeaway</strong><br>
    The <span style="color:var(--accent-blue)">stack</span> is fast, automatic, and limited — it handles local variables and function calls. The <span style="color:var(--accent-purple)">heap</span> is flexible, manual, and large — it handles dynamic allocations. Choosing where data lives is one of the core decisions in C programming. Use the stack for small, short-lived data. Use the heap for large or long-lived data.
  </div>

</main>
</body>
</html>
